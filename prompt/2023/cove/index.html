<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Chain-of-Verification | Shirin Tahmasebi </title> <meta name="author" content="Shirin Tahmasebi"> <meta name="description" content="Chain-of-Verification Reduces Hallucination in LLMs "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?ce48ee9bc248ee6b18f3aeefc03ed2f9"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://shirintahmasebi.github.io/prompt/2023/cove/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Shirin Tahmasebi </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">CV </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">Publications</a> <a class="dropdown-item " href="/background/">Background</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Notes </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/bias/">Bias</a> <a class="dropdown-item " href="/tokenization/">Tokenization</a> <a class="dropdown-item " href="/llm_judge/">LLM as Evaluator</a> <a class="dropdown-item " href="/prompt/">Prompt Engineering</a> <a class="dropdown-item " href="/compression/">LLM Compression</a> <a class="dropdown-item " href="/agents/">LLM Agents</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/recsys/">Recommendation Systems</a> <a class="dropdown-item " href="/other/">Others</a> </div> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Chain-of-Verification</h1> <p class="post-meta"> October 01, 2023 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2023   ·   <i class="fa-solid fa-hashtag fa-sm"></i> hallucination   <i class="fa-solid fa-hashtag fa-sm"></i> prompt   </p> </header> <article class="post-content"> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"> <a href="#chain-of-verification-reduces-hallucination-in-llms">Chain-of-Verification Reduces Hallucination in LLMs</a> <ul> <li class="toc-entry toc-h3"><a href="#introduction">Introduction</a></li> <li class="toc-entry toc-h3"><a href="#research-gap">Research Gap</a></li> <li class="toc-entry toc-h3"><a href="#solution-cove">Solution: CoVe</a></li> <li class="toc-entry toc-h3"><a href="#experiments">Experiments</a></li> <li class="toc-entry toc-h3"><a href="#conclusion">Conclusion</a></li> </ul> </li> </ul> </div> <hr> <div id="markdown-content"> <h2 id="chain-of-verification-reduces-hallucination-in-llms"><a href="https://arxiv.org/pdf/2309.11495.pdf" rel="external nofollow noopener" target="_blank">Chain-of-Verification Reduces Hallucination in LLMs</a></h2> <h3 id="introduction">Introduction</h3> <p>In the world of Large Language Models (LLMs), generating accurate responses is a challenge, especially when it comes to lesser-known facts. Despite having massive amounts of training data, models often end up creating plausible but incorrect information, known as hallucination. This paper tackles this issue head-on by introducing the Chain-of-Verification (CoVe) method. CoVe is all about making language models think twice before they speak. It guides the model through a four-step process: first, it generates a response; then, it plans and executes verification questions to fact-check itself, and finally, it refines the initial response based on the verification. The goal is to reduce hallucinations and make language models more reliable.</p> <h3 id="research-gap">Research Gap</h3> <p>The authors addresses the challenge of hallucination in large language models (LLMs). Hallucination refers to the generation of plausible yet incorrect factual information by language models. The paper identifies this issue as an unsolved problem in the context of LLMs, particularly when dealing with lesser-known facts or facts occurring relatively rarely in training corpora.</p> <h3 id="solution-cove">Solution: CoVe</h3> <p>The CoVe (Chain-of-Verification) method consists of four main steps aimed at reducing hallucinations in LLMs. These steps are performed by prompting the same language model in different ways to obtain the desired responses at each stage. The overall goal of CoVe is to leverage the model’s ability to reason and fact-check its own responses, leading to a final verified response with reduced hallucinations. The method aims to provide a more accurate and reliable output by iteratively assessing and correcting the model’s initial responses.</p> <p>Here’s a brief explanation of each step:</p> <ol> <li> <p><strong>Generate Baseline Response:</strong> The process begins by having the language model generate an initial response to a given query. This initial response serves as the baseline that the method aims to improve upon.</p> </li> <li> <p><strong>Plan Verifications:</strong> Conditioned on both the original query and the baseline response, the model is prompted to generate a series of verification questions. These questions are designed to test the factual claims made in the baseline response. The language model is free to phrase these questions in any form, and they don’t necessarily match the original text’s wording.</p> </li> <li> <p><strong>Execute Verifications:</strong> The planned verification questions are then answered independently. Instead of relying on external tools, the language model itself is used to check its own work. The goal is to assess whether there are any inconsistencies or mistakes in the original response by systematically answering the verification questions.</p> </li> <li> <p><strong>Generate Final Verified Response:</strong> Based on the answers to the verification questions and any identified inconsistencies, a final improved response is generated. This step incorporates the results of the verification process, aiming to produce a response that is more accurate and less prone to hallucination than the baseline generated in the first step.</p> </li> </ol> <p>The <strong>Execute Verifications</strong> step in the CoVe method involves answering the planned verification questions. The paper explores different variants of this step to further improve the overall performance. Here’s a brief explanation of each variant:</p> <ol> <li> <p><strong>Joint:</strong> In the joint method, the planning and execution of verification questions are accomplished using a single prompt. The few-shot demonstrations provided to the model include both the verification questions and their corresponding answers immediately after the questions. This approach aims to streamline the process but has potential downsides, as the verification answers may condition on the initial response, possibly leading to repetition of hallucinations.</p> </li> <li> <p><strong>Two-Step:</strong> The two-step approach separates the planning and execution into distinct steps, each with its own prompt. The planning prompt conditions on the baseline response, generating the verification questions. The answers to these questions are then obtained in a separate execution step, where the context given to the prompt contains only the questions and not the original baseline response. This separation aims to avoid repetition and potential biases introduced by the baseline response.</p> </li> <li> <p><strong>Factored:</strong> The factored approach involves answering each verification question independently as separate prompts. The key distinction is that these prompts do not contain the original baseline response, reducing the likelihood of simply copying or repeating hallucinations. This method provides the advantage of removing potential interference not only from the baseline response but also between answer contexts.</p> </li> <li> <p><strong>Factor+Revise:</strong> The factor+revise approach introduces an extra step after answering the verification questions. In this step, the CoVe pipeline explicitly cross-checks whether the verification answers indicate an inconsistency with the original responses. This is executed as a deliberate step via an additional prompt. Unlike the verification questions and answers, this phase needs to condition on both the baseline response and the verification question and answer pairs.</p> </li> </ol> <p>These variants offer different ways to structure the execution of verification questions, with the aim of improving the correctness of the overall response and reducing hallucinations. The paper investigates and compares these variants across various tasks to assess their effectiveness in mitigating inaccuracies.</p> <h3 id="experiments">Experiments</h3> <p>The primary aspects of the experimental setups are as follows:</p> <ul> <li> <strong>Tasks:</strong> <ol> <li> <strong>Wikidata:</strong> <ul> <li>Task: List-based questions generated using the Wikidata API.</li> <li>Example: “Who are some [Profession]s who were born in [City]?”</li> </ul> </li> <li> <strong>Wiki-Category List:</strong> <ul> <li>Task: Set-generation task using the QUEST dataset created from Wikipedia Category lists.</li> <li>Example: “Name some Mexican animated horror films.”</li> </ul> </li> <li> <strong>MultiSpanQA:</strong> <ul> <li>Task: Reading comprehension benchmark with questions having multiple independent answers.</li> <li>Example: “Who invented the first printing press and in what year?”</li> </ul> </li> <li> <strong>Longform Generation of Biographies:</strong> <ul> <li>Task: Generating biographies using the prompt “Tell me a bio of &lt;entity&gt;.”</li> </ul> </li> </ol> </li> <li> <strong>Dataset:</strong> The experiments use specific datasets for each task, including automatically generated questions from the Wikidata API, the QUEST dataset derived from Wikipedia Category lists, and benchmarks like MultiSpanQA for reading comprehension.</li> <li> <strong>Baselines:</strong> Llama 65B and Llama 2 (Instruction Fine-Tuned)</li> <li><strong>Evaluation Metrics:</strong></li> <li> <strong>Wikidata and Wiki-Category List:</strong> <ul> <li>Precision (micro-averaged) for measuring performance on list-based questions.</li> </ul> </li> <li> <strong>MultiSpanQA:</strong> <ul> <li>F1 score for closed-book question-answering tasks.</li> </ul> </li> <li> <strong>Longform Generation of Biographies:</strong> <ul> <li>FACTSCORE metric, which uses retrieval-augmented language models for fact-checking responses.</li> </ul> </li> </ul> <h3 id="conclusion">Conclusion</h3> <p>This paper takes on the challenge of fixing a persistent problem in language models, hallucination. By introducing deliberate reasoning steps, CoVe offers a systematic approach for language models to assess and correct their own responses. The experiments conducted across diverse language tasks, including list-based questions, closed-book QA, and longform text generation, showcase the effectiveness of CoVe in mitigating hallucinations. The exploration of variants, such as joint, two-step, factored, and factor+revise, provides valuable insights into the nuances of verification processes. Notably, CoVe demonstrates substantial improvements over baseline responses, outperforming existing methods. The findings underscore the significance of incorporating reasoning mechanisms in LLMs to enhance their accuracy, paving the way for further advancements in mitigating hallucination challenges and fostering more reliable language understanding models.</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Shirin Tahmasebi. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>