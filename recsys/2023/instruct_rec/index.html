<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Recommendation as Instruction Following (InstructRec) | Shirin Tahmasebi </title> <meta name="author" content="Shirin Tahmasebi"> <meta name="description" content="A Large Language Model Empowered Recommendation Approach "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?ce48ee9bc248ee6b18f3aeefc03ed2f9"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://shirintahmasebi.github.io/recsys/2023/instruct_rec/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Shirin Tahmasebi </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">CV </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">Publications</a> <a class="dropdown-item " href="/background/">Background</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Notes </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/bias/">Bias</a> <a class="dropdown-item " href="/tokenization/">Tokenization</a> <a class="dropdown-item " href="/llm_judge/">LLM as Evaluator</a> <a class="dropdown-item " href="/prompt/">Prompt Engineering</a> <a class="dropdown-item " href="/compression/">LLM Compression</a> <a class="dropdown-item " href="/agents/">LLM Agents</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/recsys/">Recommendation Systems</a> <a class="dropdown-item " href="/other/">Others</a> </div> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Recommendation as Instruction Following (InstructRec)</h1> <p class="post-meta"> May 14, 2023 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2023   ·   <i class="fa-solid fa-hashtag fa-sm"></i> recsys   <i class="fa-solid fa-hashtag fa-sm"></i> llm   </p> </header> <article class="post-content"> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h2"><a href="#recommendation-as-instruction-following-a-large-language-model-empowered-recommendation-approach">Recommendation as Instruction Following: A Large Language Model Empowered Recommendation Approach</a></li> </ul> </div> <hr> <div id="markdown-content"> <h2 id="recommendation-as-instruction-following-a-large-language-model-empowered-recommendation-approach"><a href="https://arxiv.org/abs/2305.07001" rel="external nofollow noopener" target="_blank">Recommendation as Instruction Following: A Large Language Model Empowered Recommendation Approach</a></h2> <p>In this paper, the authors are focusing on using <em>instruction following</em>, one of the most interesting capabilities of Large Language Models (LLM), to improve the existing recommendation systems. The main reason behind that is that by using the instruction-following capability, it would be possible to create a recmmendation system with generalization ability to be able to handle the unseen data.</p> <p>To create such instructions, they take three aspects into account:</p> <ul> <li> <strong>User Preference (P)</strong>, which is the inherent and long-term user preferences. User preferences can be divided into three different levels: <ul> <li> <em>None</em> (P<sub>0</sub>)</li> <li> <em>Implicit Preference</em> (P<sub>1</sub>)</li> <li> <em>Explicit Preference</em> (P<sub>2</sub>)</li> </ul> </li> <li> <strong>Intention (I)</strong>, which is the immediate demands of the user for certain types of items. The user intention can be different from user long-term preferences. User intentions can be divided into three different levels: <ul> <li> <em>None</em> (I<sub>0</sub>)</li> <li> <em>Vague Intention</em> (I<sub>1</sub>)</li> <li> <em>Specific Intention</em> (I<sub>2</sub>)</li> </ul> </li> <li> <strong>Task Form (T)</strong>, which indicates how to formulate the instructions for apecific tasks. The task forms can be one of the following items: <ul> <li> <em>Pointwise Recommendation</em> (T<sub>0</sub>)</li> <li> <em>Pairwise Recommendation</em> (T<sub>1</sub>)</li> <li> <em>Matching</em> (T<sub>2</sub>)</li> <li> <em>Reranking</em> (T<sub>3</sub>)</li> </ul> </li> </ul> <p>All of the mentioned aspects for instruction creation are summarized in the following figure:</p> <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_instruction_aspects.png" alt="Instructions Aspects" width="500" height="300"></p> <p>By having different combinations of the three aspects, about 36 (3 \(\times\) 3 \(\times\) 4) instruction templates are created. Moreover, several techniques are employed to increase the diversity of instruction templates which are explained later. The following figure representes serveral instruction examples, to make it clear that how instruction templates are instantiated (color coding: red=preference, green=intentions, blue=task):</p> <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_instruction_examples.png" alt="Instructions Aspects" width="800" height="150"></p> <p>Now, the question is how to fill each aspect placeholder in the instruction example? In other words, how user preferences (red color), user intentions (green color), and task forms (blue color) should be filled? The main strategy for doing so is to automatically generate the prompt by leveraging a strong teacher-LLM (e.g., GPT-3) to be able to generate personaliezd prompt for each user. So, in what follows, we provide more details about how the three aspects–i.e., preference, intention, and task form–can be extracted and annotated to be injected into the instruction templates.</p> <ul> <li> <strong>Preference Annotation:</strong> Different strategies are used for annotating different preference levels: <ul> <li> <strong>Implicit Preference (P<sub>1</sub>):</strong> The item titles are used as representations to create users’ historical interactions. After creating the historical interation, the following instruction template is filled: <code class="language-plaintext highlighter-rouge">The user has previously purchased the following items: {USER_INTERACTION_HISTORY}.</code> </li> <li> <strong>Explicit Preference (P<sub>2</sub>):</strong> In this case, since most of the datasets do not contain users’ explicit preferences, the teacher-LLM is asked to generate explicit expressions of user preferences based on the historical interactions. For example, the following image represents how the teacher-LLM is asked to generate users’ explicit preferences:</li> </ul> </li> </ul> <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_preference_annotion_explicit.png" alt="Instructions Aspects" width="600" height="200"></p> <ul> <li> <strong>Intention Annotation:</strong> Similar to the preference annotation process, the intention annotaton strategy is determined based on the intention levels: <ul> <li> <strong>Vague Intention (I<sub>1</sub>):</strong> To extract the vague intentions, reviews are considered to be very useful and informative, since they provide valuable evidence about user’s personal tastes. So, here, the teacher-LLM is provided by item review (I am not sure if the review of the user is used or all the review for a specific item from other users) and is asked to generate the user’s intention. An example is provided in the following figure:</li> </ul> <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_intention_annotion_vague.png" alt="Instructions Aspects" width="600" height="200"></p> <ul> <li> <strong>Specific Intention (I<sub>2</sub>):</strong> In this case, the category of items with which user had intertions are considered as their specific intentions. For example, it can be: <code class="language-plaintext highlighter-rouge">Video Games, PC, Accessories, Gaming Mice</code>.</li> </ul> </li> <li> <strong>Task Form Annotation:</strong> The task form annotation is determined by the task type: <ul> <li> <strong>Pointwise Recommendation (T<sub>0</sub>):</strong> <code class="language-plaintext highlighter-rouge">Based on the {USER_RELATED_INFORMATION}, is it likely that the user will interact with {TARGET_ITEM} next?</code> The model is supposed to answer yes or no!</li> <li> <strong>Pairwise Recommendation (T<sub>1</sub>):</strong> It is not implemented yet.</li> <li> <strong>Matching (T<sub>2</sub>):</strong> <code class="language-plaintext highlighter-rouge">Predict the next possible item.</code> </li> <li> <strong>Reranking (T<sub>3</sub>):</strong> <code class="language-plaintext highlighter-rouge">Select one item from the following {CANDIDATES}.</code> </li> </ul> </li> </ul> <p>Moreover, several techniques are employed to increase the diversity of instruction templates, including:</p> <ul> <li> <strong>Turn the Task Around:</strong> It is based on swaping between the input and output of normal instructions. An example of using this strategy is represented in the following figure: <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_instruction_diversity_swap.png" alt="Instructions Aspects" width="600" height="300"></p> </li> <li> <strong>Enforcing the Relatedness between Preference and Intention:</strong> This strategy is based on the hypothesis that the revealed short-term user intentions and their long-term prefernces are highly related. An example of this strategy is as follows: <p style="text-align:center;"><img src="/assets/img/weekly-review/instructRec_instruction_diversity_relatedness.png" alt="Instructions Aspects" width="600" height="500"></p> </li> </ul> <p>For evaluation, they have used two datasets: Games and CDs from Amazon. Also, as baselines, they have considered BERT4Rec, SASRec, GPT3.5, TEM, and DSSM. The metrics used for evaluation are Hit Ratio (HR) and Normalized Discounted Cumulative Gain (NDGC). According to their results, InstructRec could outperform the baselines in many cases.</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Shirin Tahmasebi. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>